<section class="bg-white p-4 rounded-lg shadow">
  <h1 class="mb-3 text-xl font-bold text-mainColor">All Orders</h1>

  @if (cartItemData.length > 0) { @for (order of cartItemData; track order._id)
  {
  <div class="mb-8 border border-gray-300 rounded-lg shadow-md p-4">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-bold">OrderID: {{ order.id }}</h3>
      <p class="text-sm text-gray-500">
        Date: {{ order.createdAt | date : "medium" }}
      </p>
    </div>

    <div class="mt-3 text-sm text-gray-600">
      <p>Total Price: {{ order.totalOrderPrice | currency : "GBP" }}</p>
      <p>Tax Price: {{ order.taxPrice | currency : "GBP" }}</p>
      <p>Paid: {{ order.isPaid ? "Yes" : "No " }}</p>
      <p>paymentType: {{ order.paymentMethodType }}</p>
    </div>

    <!-- جدول المنتجات -->
    <div class="overflow-x-auto mt-5">
      @for (item of order.cartItems; track item._id) {
      <div
        class="bg-white p-2 rounded shadow my-2 grid sm:grid-cols-12 items-center"
      >
        <div class="col-span-1">
          <div class="flex items-center justify-center space-x-4 my-3">
            <div
              class="bg-gray-200 border rounded-lg flex items-center space-x-10 py-1 px-2"
            >
              <span>{{ item.count }}</span>
            </div>
          </div>
        </div>
        <div class="col-span-1">
          <img
            [src]="item.product.imageCover"
            class="w-[50px]"
            [alt]="item.product.title"
          />
        </div>
        <div class="col-span-4">
          <h3>{{ item.product.title }}</h3>
        </div>
        <div class="col-span-1">
          <h3>{{ item.product.brand.name }}</h3>
        </div>
        <div class="col-span-1">
          <h3>{{ item.product.category.name }}</h3>
        </div>
        <div class="col-span-1">
          <span class="items-center"
            ><i class="fas fa-star text-yellow-500 me-1"></i
            >{{ item.product.ratingsAverage }}</span
          >
        </div>
        <div class="col-span-1">
          <span>{{ item.price | currency : "GBP" }}</span>
        </div>
        <div class="col-span-2">
          <button
            (click)="addProductToCart(item.product.id)"
            class="btn btnH w-full"
          >
            Add To Cart
          </button>
        </div>
      </div>
      }
    </div>
  </div>
  } } @else {
  <p class="text-gray-500">No orders found.</p>
  }
</section>
