import{a as x}from"./chunk-VD3SOV7I.js";import{b as p,d as k,f as C,h as I,i as F,k as _}from"./chunk-6DFLPQ44.js";import{a as b}from"./chunk-V5HOMKS2.js";import{a as v,c as y}from"./chunk-WDJ36UZ5.js";import"./chunk-G7TNDSPZ.js";import"./chunk-XXMQDW6T.js";import{Db as m,Na as o,Qb as a,W as n,Ya as f,pb as r,qb as i,rb as l,sb as c}from"./chunk-7MECJYW7.js";import"./chunk-4CLCTAJ7.js";var S=class d{fb=n(F);activatedRoute=n(v);cartService=n(b);router=n(y);checkoutForm;id=null;ngOnInit(){this.initForm(),this.getCartId()}initForm(){this.checkoutForm=this.fb.group({shippingAddress:this.fb.group({details:[null,[p.required]],phone:[null,[p.required,p.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[p.required]]})})}getCartId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.id=e.get("id")}})}getOrderVisaData(){this.checkoutForm.valid&&this.cartService.checkOutSession(this.id,this.checkoutForm.value).subscribe({next:e=>{e.status==="success"&&window.open(e.session.url,"_self")},error:e=>{console.log(e)}})}getOrderCashData(){this.cartService.getOrderCash(this.id,this.checkoutForm.value).subscribe({next:e=>{console.log(e),e.status==="success"&&this.router.navigate(["/allorders"])},error:e=>{console.log(e)}})}static \u0275fac=function(u){return new(u||d)};static \u0275cmp=f({type:d,selectors:[["app-checkout"]],decls:13,vars:13,consts:[[1,"bg-gray-200","p-10","my-14'","md:w-1/2","mx-auto","shadow"],[1,"text-center","text-4xl","my-3"],[3,"formGroup"],[3,"element","control","idInput","labelInput"],["typeInput","tel",3,"element","control","idInput","labelInput"],["typeInput","'text'",3,"element","control","idInput","labelInput"],[1,"flex","items-center","space-x-10"],[1,"btn","w-full","pt-3","pb-3",3,"click"]],template:function(u,t){if(u&1&&(i(0,"section",0)(1,"h1",1),a(2,"Checkout"),l(),i(3,"form",2),c(4,"app-input",3),i(5,"app-input",4),a(6," Accept anly egypt phone numbers "),l(),c(7,"app-input",5),i(8,"div",6)(9,"button",7),m("click",function(){return t.getOrderVisaData()}),a(10," payment By Visa "),l(),i(11,"button",7),m("click",function(){return t.getOrderCashData()}),a(12," payment By Cash "),l()()()()),u&2){let s,h,g;o(3),r("formGroup",t.checkoutForm),o(),r("element","text")("control",(s=t.checkoutForm.get("shippingAddress"))==null?null:s.get("details"))("idInput","details")("labelInput","Details"),o(),r("element","input")("control",(h=t.checkoutForm.get("shippingAddress"))==null?null:h.get("phone"))("idInput","phone")("labelInput","Phone"),o(2),r("element","input")("control",(g=t.checkoutForm.get("shippingAddress"))==null?null:g.get("city"))("idInput","city")("labelInput","City")}},dependencies:[_,C,k,I,x],encapsulation:2})};export{S as CheckoutComponent};
