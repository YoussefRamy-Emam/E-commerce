import{a as w}from"./chunk-FWOFWFQE.js";import{l as y}from"./chunk-6GWGDMCW.js";import{a as k}from"./chunk-V5HOMKS2.js";import{a as I}from"./chunk-WDJ36UZ5.js";import"./chunk-G7TNDSPZ.js";import{c as b,h as L}from"./chunk-XXMQDW6T.js";import{Eb as l,Fb as g,Ka as D,Na as a,Qb as c,R as E,Rb as P,Sb as m,W as n,Ya as x,aa as p,ba as h,kb as C,lb as S,tb as o,ub as r,vb as v,yb as f,zb as _}from"./chunk-7MECJYW7.js";import"./chunk-4CLCTAJ7.js";var u=class s{httpClient=n(b);getproductDetails(e){return this.httpClient.get(L.baseUrl+`products/${e}`)}static \u0275fac=function(t){return new(t||s)};static \u0275prov=E({token:s,factory:s.\u0275fac,providedIn:"root"})};function V(s,e){if(s&1){let t=f();o(0,"i",14),l("click",function(){p(t);let d=g();return h(d.addProductToWishList(d.ProductDetails.id))}),r()}}function j(s,e){if(s&1){let t=f();o(0,"i",15),l("click",function(){p(t);let d=g();return h(d.removeSpecificWishList(d.ProductDetails.id))}),r()}}var T=class s{activatedRoute=n(I);productDetailsService=n(u);cartService=n(k);wishlistService=n(w);toastrService=n(y);_id=null;get id(){return this._id}set id(e){this._id=e}ProductDetails={};WishListProduct=[];checkId=[];isLoved=!1;ngOnInit(){this.getProductId(),this.checkLoveItem()}getProductId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.id=e.get("id"),this.getProductDetailsData()}})}getProductDetailsData(){this.productDetailsService.getproductDetails(this.id).subscribe({next:e=>{console.log(e.data),this.ProductDetails=e.data,this.checkIfProductIsLoved()},error:e=>{console.log(e)}})}checkLoveItem(){this.wishlistService.getLoggedUserWishList().subscribe({next:e=>{this.WishListProduct=e.data,this.checkId=this.WishListProduct.map(t=>t.id),this.ProductDetails.id&&this.checkIfProductIsLoved()},error:e=>{console.error(e)}})}checkIfProductIsLoved(){this.isLoved=this.checkId.includes(String(this.ProductDetails.id))}addProductToCart(e){this.cartService.addProductToCart(e).subscribe({next:t=>{console.log(t),t.status==="success"&&this.toastrService.success(t.message,"FreshCart")},error:t=>{console.log(t)}})}addProductToWishList(e){this.wishlistService.addProductToWishList(e).subscribe({next:t=>{console.log(t),t.status==="success"&&(this.toastrService.success(t.message,"FreshCart"),this.isLoved=!0,this.checkId.push(e))},error:t=>{console.log(t)}})}removeSpecificWishList(e){this.wishlistService.removeSpecificWishList(e).subscribe({next:t=>{console.log(t),t.status==="success"&&(this.toastrService.success(t.message,"FreshCart"),this.isLoved=!1,this.checkId=this.checkId.filter(i=>i!==e))},error:t=>{console.log(t)}})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=x({type:s,selectors:[["app-details"]],decls:26,vars:8,consts:[[1,"py-10"],[1,"container"],[1,"text-center","text-5xl"],[1,"grid","sm:grid-cols-12","gap-8","items-center"],[1,"col-span-4"],[1,"w-full",3,"src","alt"],[1,"col-span-8"],[1,"text-2xl"],[1,"text-gray-700","text-sm","my-3"],[1,"flex","justify-between","items-center"],[1,"fa-solid","fa-heart","fa-xl","cursor-pointer"],[1,"fa-solid","text-red-600","fa-heart","fa-xl","cursor-pointer"],[1,"fas","fa-star","text-yellow-500"],[1,"btn","w-full","mt-2",3,"click"],[1,"fa-solid","fa-heart","fa-xl","cursor-pointer",3,"click"],[1,"fa-solid","text-red-600","fa-heart","fa-xl","cursor-pointer",3,"click"]],template:function(t,i){t&1&&(o(0,"section",0)(1,"div",1)(2,"h1",2),c(3,"Details Products"),r(),o(4,"div",3)(5,"div",4),v(6,"img",5),r(),o(7,"div",6)(8,"h2",7),c(9),r(),o(10,"p",8),c(11),r(),o(12,"span"),c(13),r(),o(14,"div",9)(15,"span"),c(16),r(),o(17,"div",9)(18,"span"),C(19,V,1,0,"i",10)(20,j,1,0,"i",11),r(),o(21,"span"),v(22,"i",12),c(23),r()()(),o(24,"button",13),l("click",function(){return i.addProductToCart(i.ProductDetails.id)}),c(25," Add To Cart "),r()()()()()),t&2&&(a(6),_("src",i.ProductDetails.imageCover,D)("alt",i.ProductDetails.title),a(3),P(i.ProductDetails.title),a(2),m(" ",i.ProductDetails.description," "),a(2),P(i.ProductDetails.category.name),a(3),m("",i.ProductDetails.price,"EGP"),a(3),S(i.isLoved===!1?19:i.isLoved===!0?20:-1),a(4),m(" ",i.ProductDetails.ratingsAverage))},encapsulation:2})};export{T as DetailsComponent};
