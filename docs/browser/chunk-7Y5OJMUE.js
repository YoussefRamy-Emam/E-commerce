import{a as w}from"./chunk-WPKPEDBT.js";import{l as D}from"./chunk-6GWGDMCW.js";import{a as A}from"./chunk-V5HOMKS2.js";import"./chunk-WDJ36UZ5.js";import{j as T,l as P}from"./chunk-G7TNDSPZ.js";import"./chunk-XXMQDW6T.js";import{Eb as b,Fb as E,Ka as _,Na as o,Qb as r,Rb as a,Sb as m,W as s,Ya as C,aa as f,ba as g,bc as l,dc as c,kb as I,lb as y,nb as p,ob as x,tb as n,ub as t,vb as v,yb as S,zb as h}from"./chunk-7MECJYW7.js";import"./chunk-4CLCTAJ7.js";var O=(d,i)=>i._id;function N(d,i){if(d&1){let e=S();n(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"span"),r(5),t()()()(),n(6,"div",10),v(7,"img",13),t(),n(8,"div",14)(9,"h3"),r(10),t()(),n(11,"div",10)(12,"h3"),r(13),t()(),n(14,"div",10)(15,"h3"),r(16),t()(),n(17,"div",10)(18,"span",15),v(19,"i",16),r(20),t()(),n(21,"div",10)(22,"span"),r(23),l(24,"currency"),t()(),n(25,"div",17)(26,"button",18),b("click",function(){let B=f(e).$implicit,F=E(3);return g(F.addProductToCart(B.product.id))}),r(27," Add To Cart "),t()()()}if(d&2){let e=i.$implicit;o(5),a(e.count),o(2),h("src",e.product.imageCover,_)("alt",e.product.title),o(3),a(e.product.title),o(3),a(e.product.brand.name),o(3),a(e.product.category.name),o(4),a(e.product.ratingsAverage),o(3),a(c(24,8,e.price,"GBP"))}}function U(d,i){if(d&1&&(n(0,"div",3)(1,"div",4)(2,"h3",5),r(3),t(),n(4,"p",6),r(5),l(6,"date"),t()(),n(7,"div",7)(8,"p"),r(9),l(10,"currency"),t(),n(11,"p"),r(12),l(13,"currency"),t(),n(14,"p"),r(15),t(),n(16,"p"),r(17),t()(),n(18,"div",8),p(19,N,28,11,"div",9,O),t()()),d&2){let e=i.$implicit;o(3),m("OrderID: ",e.id),o(2),m(" Date: ",c(6,6,e.createdAt,"medium")," "),o(4),m("Total Price: ",c(10,9,e.totalOrderPrice,"GBP")),o(3),m("Tax Price: ",c(13,12,e.taxPrice,"GBP")),o(3),m("Paid: ",e.isPaid?"Yes":"No "),o(2),m("paymentType: ",e.paymentMethodType),o(2),x(e.cartItems)}}function $(d,i){if(d&1&&p(0,U,21,15,"div",3,O),d&2){let e=E();x(e.cartItemData)}}function j(d,i){d&1&&(n(0,"p",2),r(1,"No orders found."),t())}var k=class d{authService=s(w);cartService=s(A);toastrService=s(D);tokenId;cartItemData=[];ngOnInit(){this.getIdToken(),this.getUserOrderData()}getIdToken(){let i=this.authService.decodeToken();this.tokenId=i?.id}getUserOrderData(){this.cartService.getUserOrder(this.tokenId).subscribe({next:i=>{console.log(i),this.cartItemData=i},error:i=>{console.log(i)}})}addProductToCart(i){this.cartService.addProductToCart(i).subscribe({next:e=>{console.log(e),e.status==="success"&&this.toastrService.success(e.message,"FreshCart")},error:e=>{console.log(e)}})}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=C({type:d,selectors:[["app-allorders"]],decls:5,vars:1,consts:[[1,"bg-white","p-4","rounded-lg","shadow"],[1,"mb-3","text-xl","font-bold","text-mainColor"],[1,"text-gray-500"],[1,"mb-8","border","border-gray-300","rounded-lg","shadow-md","p-4"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-bold"],[1,"text-sm","text-gray-500"],[1,"mt-3","text-sm","text-gray-600"],[1,"overflow-x-auto","mt-5"],[1,"bg-white","p-2","rounded","shadow","my-2","grid","sm:grid-cols-12","items-center"],[1,"col-span-1"],[1,"flex","items-center","justify-center","space-x-4","my-3"],[1,"bg-gray-200","border","rounded-lg","flex","items-center","space-x-10","py-1","px-2"],[1,"w-[50px]",3,"src","alt"],[1,"col-span-4"],[1,"items-center"],[1,"fas","fa-star","text-yellow-500","me-1"],[1,"col-span-2"],[1,"btn","btnH","w-full",3,"click"]],template:function(e,u){e&1&&(n(0,"section",0)(1,"h1",1),r(2,"All Orders"),t(),I(3,$,2,0)(4,j,2,0,"p",2),t()),e&2&&(o(3),y(u.cartItemData.length>0?3:4))},dependencies:[P,T],encapsulation:2})};export{k as AllordersComponent};
