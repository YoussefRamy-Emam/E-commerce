import{a as C}from"./chunk-VD3SOV7I.js";import{a as v}from"./chunk-WPKPEDBT.js";import{b as n,d as F,f as S,h as y,i as I,k as w}from"./chunk-6DFLPQ44.js";import{c as f,d as b}from"./chunk-WDJ36UZ5.js";import{u as h}from"./chunk-G7TNDSPZ.js";import"./chunk-XXMQDW6T.js";import{Db as g,Na as l,Qb as r,W as t,Ya as c,a as u,pb as a,qb as e,rb as i,sb as d}from"./chunk-7MECJYW7.js";import"./chunk-4CLCTAJ7.js";var k=class p{authService=t(v);router=t(f);fb=t(I);cookieService=t(h);msgError="";subscribtion=new u;loginForm;ngOnInit(){this.initForm()}initForm(){this.loginForm=this.fb.group({email:[null,[n.required,n.email]],password:[null,[n.required,n.pattern(/^\w{6,}$/)]]})}submitForm(){this.loginForm.valid&&(this.subscribtion.unsubscribe(),this.subscribtion=this.authService.loginForm(this.loginForm.value).subscribe({next:o=>{console.log(o),o.message==="success"&&(this.msgError="",setTimeout(()=>{this.cookieService.set("token",o.token),console.log(this.authService.decodeToken()),this.router.navigate(["/home"])},1e3))},error:o=>{console.log(o),this.msgError=o.error.message}}))}static \u0275fac=function(m){return new(m||p)};static \u0275cmp=c({type:p,selectors:[["app-login"]],decls:12,vars:8,consts:[[1,"bg-gray-100","border","border-gray-200","p-4","shadow-md","md:w-1/2","mx-auto","my-14","rounded-lg"],[1,"text-center","mb-5","font-light","text-3xl"],[3,"ngSubmit","formGroup"],[3,"control","typeInput","idInput","labelInput"],[3,"control","idInput","labelInput"],["routerLink","/forgetpassword",1,"text-shadow-sky-600","cursor-pointer"],[1,"btn","w-full","mt-4","p-3"]],template:function(m,s){m&1&&(e(0,"section",0)(1,"h1",1),r(2,"Login Now"),i(),e(3,"form",2),g("ngSubmit",function(){return s.submitForm()}),d(4,"app-input",3),e(5,"app-input",4),r(6," custom field should match the pattern [should more than or equal 6] "),i(),e(7,"div")(8,"a",5),r(9,"ForgetPassword"),i(),e(10,"button",6),r(11,"Login"),i()()()()),m&2&&(l(3),a("formGroup",s.loginForm),l(),a("control",s.loginForm.get("email"))("typeInput","email")("idInput","email")("labelInput","Email"),l(),a("control",s.loginForm.get("password"))("idInput","password")("labelInput","Password"))},dependencies:[w,S,F,y,C,b],encapsulation:2})};export{k as LoginComponent};
