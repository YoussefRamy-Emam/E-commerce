import{a as V}from"./chunk-VD3SOV7I.js";import{a as x}from"./chunk-WPKPEDBT.js";import{b as p,d as _,f as P,h as E,i as F,k as I}from"./chunk-6DFLPQ44.js";import{l as N}from"./chunk-6GWGDMCW.js";import{c as S}from"./chunk-WDJ36UZ5.js";import"./chunk-G7TNDSPZ.js";import"./chunk-XXMQDW6T.js";import{Db as b,Fb as m,Na as n,Ob as d,Qb as s,W as c,Ya as h,aa as f,ba as w,kb as y,lb as C,pb as l,qb as i,rb as o,sb as v,yb as g}from"./chunk-7MECJYW7.js";import"./chunk-4CLCTAJ7.js";function T(a,t){if(a&1){let e=g();i(0,"form",9),b("ngSubmit",function(){f(e);let u=m();return w(u.formStep1())}),v(1,"app-input",10),i(2,"button",11),s(3,"Verify Email"),o()()}if(a&2){let e=m();l("formGroup",e.verifyEmail),n(),l("control",e.verifyEmail.get("email"))("typeInput","email")("idInput","email")("labelInput","Email")}}function R(a,t){if(a&1){let e=g();i(0,"form",9),b("ngSubmit",function(){f(e);let u=m();return w(u.formStep2())}),v(1,"app-input",10),i(2,"button",11),s(3,"Verify Code"),o()()}if(a&2){let e=m();l("formGroup",e.verifyCode),n(),l("control",e.verifyCode.get("resetCode"))("typeInput","number")("idInput","resetCode")("labelInput","ResetCode")}}function D(a,t){if(a&1){let e=g();i(0,"form",9),b("ngSubmit",function(){f(e);let u=m();return w(u.formStep3())}),i(1,"app-input",12),s(2," custom field should match the pattern [should more than or equal 6] "),o(),v(3,"app-input",12),i(4,"button",11),s(5,"Confirm Password"),o()()}if(a&2){let e=m();l("formGroup",e.resetPassword),n(),l("control",e.resetPassword.get("newPassword"))("idInput","newPassword")("labelInput","NewPassword"),n(2),l("control",e.resetPassword.get("reNewPassword"))("idInput","reNewPassword")("labelInput","ReNewPassword")}}var G=class a{fb=c(F);authService=c(x);router=c(S);toastrService=c(N);verifyEmail;verifyCode;resetPassword;step=1;ngOnInit(){this.initFirm()}initFirm(){this.verifyEmail=this.fb.group({email:[null,[p.required,p.email]]}),this.verifyCode=this.fb.group({resetCode:[null,[p.required]]}),this.resetPassword=this.fb.group({newPassword:[null,[p.required,p.pattern(/^\w{6,}$/)]],reNewPassword:[null,[p.required,p.pattern(/^\w{6,}$/)]]},{validators:this.confirmPassword})}confirmPassword(t){return t.get("newPassword")?.value===t.get("reNewPassword")?.value?null:(t.get("reNewPassword")?.setErrors({mismatch:!0}),{mismatch:!0})}formStep1(){this.verifyEmail.valid&&this.authService.submitVerifyEmail(this.verifyEmail.value).subscribe({next:t=>{console.log(t),t.statusMsg==="success"&&this.toastrService.success(t.message,"FreshCart"),this.step=2}})}formStep2(){this.verifyCode.valid&&this.authService.submitVerifyCode(this.verifyCode.value).subscribe({next:t=>{console.log(t),t.status==="Success"&&this.toastrService.success("Create new password","FreshCart"),this.step=3}})}sendData(){let t=this.verifyEmail.get("email")?.value,e=this.resetPassword.get("newPassword")?.value;return console.log(t),console.log(e),{email:t,newPassword:e}}formStep3(){this.resetPassword.valid&&this.authService.submitResetPassword(this.sendData()).subscribe({next:t=>{console.log(t),this.toastrService.success("success, now goto login","FreshCart"),this.router.navigate(["/login"])}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=h({type:a,selectors:[["app-forgetpassword"]],decls:30,vars:25,consts:[[1,"bg-gray-200","my-10","p-10","md:w-1/2","mx-auto"],[1,"container"],[1,"justify-between","items-center","w-full","space-y-4","sm:flex","sm:space-x-8","sm:space-y-0","rtl:space-x-reverse"],[1,"flex","items-center","space-x-2.5","rtl:space-x-reverse"],[1,"flex","items-center","justify-center","w-8","h-8","border","rounded-full","shrink-0"],[1,"font-medium","leading-tight"],[1,"text-sm"],[1,"flex","items-center","dark:text-gray-400","space-x-2.5","rtl:space-x-reverse"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[3,"control","typeInput","idInput","labelInput"],[1,"btn","w-full","py-3"],[3,"control","idInput","labelInput"]],template:function(e,r){e&1&&(i(0,"section",0)(1,"div",1)(2,"ol",2)(3,"li",3)(4,"span",4),s(5," 1 "),o(),i(6,"span")(7,"h3",5),s(8,"verifyEmail"),o(),i(9,"p",6),s(10,"Step details here"),o()()(),i(11,"li",3)(12,"span",4),s(13," 2 "),o(),i(14,"span")(15,"h3",5),s(16,"verifyCode"),o(),i(17,"p",6),s(18,"Step details here"),o()()(),i(19,"li",7)(20,"span",4),s(21," 3 "),o(),i(22,"span")(23,"h3",5),s(24,"resetPassword"),o(),i(25,"p",6),s(26,"Step details here"),o()()()(),y(27,T,4,5,"form",8)(28,R,4,5,"form",8)(29,D,6,7,"form",8),o()()),e&2&&(n(3),d("text-blue-600",r.step===1)("text-gray-500",r.step!=1),n(),d("border-blue-600",r.step===1)("border-gray-500",r.step!=1),n(7),d("text-blue-600",r.step===2)("text-gray-500",r.step!=2),n(),d("border-blue-600",r.step===2)("border-gray-500",r.step!=2),n(7),d("text-blue-600",r.step===3)("text-gray-500",r.step!=3),n(),d("border-blue-600",r.step===3)("border-gray-500",r.step!=3),n(7),C(r.step===1?27:r.step===2?28:r.step===3?29:-1))},dependencies:[I,P,_,E,V],encapsulation:2})};export{G as ForgetpasswordComponent};
